<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Session Stewart_Apollonius - Archive of Formal Proofs</title><meta name=description content="A collection of proof libraries, examples, and larger scientific developments, mechanically checked in the theorem prover Isabelle."><meta property="og:title" content="Session Stewart_Apollonius"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="/entries/stewart_apollonius/theories/"><meta property="og:image" content="/images/afp.png"><meta property="article:section" content="theories"><meta property="og:site_name" content="Archive of Formal Proofs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/afp.png"><meta name=twitter:title content="Session Stewart_Apollonius"><meta name=twitter:description content><link rel=stylesheet type=text/css href=/css/front.min.css><link rel=stylesheet type=text/css href=/css/isabelle.css><link rel=icon href=/images/favicon.ico type=image/icon><script src=/js/flexsearch.min.js></script><script src=/js/banner.js></script><script src=/js/header-search.js></script></head><body class=mathjax_ignore><aside><div><div><a href=/><img src=/images/afp.png alt="Logo of the Archive of Formal Proofs" class=logo></a><ul><li><a href=/entries/stewart_apollonius>Return to entry</a></li></ul><hr><ul><li><a href=#Stewart_Apollonius>Stewart_Apollonius</a><ul><li><a href=#Stewart_Apollonius-Apollonius>Apollonius</a></li><li><a href=#Stewart_Apollonius-Apollonius%27>Apollonius'</a></li></ul></li></ul></div><ul><li><a href=https://www.isa-afp.org/browser_info/current/AFP/Stewart_Apollonius/outline.pdf>Proof
outline</a></li><li><a href=https://www.isa-afp.org/browser_info/current/AFP/Stewart_Apollonius/document.pdf>Proof
document</a></li><li><a href=https://www.isa-afp.org/browser_info/current/AFP/Stewart_Apollonius/session_graph.pdf>Theory dependencies</a></li></ul></div></aside><div class="content theories"><header><form action=/%20search><div class=form-container><input id=searchInput type=search size=31 maxlength=255 aria-label="Search the AFP" list=autocomplete><button id=searchButton type=button><img src=/images/search.svg alt=Search></button>
<datalist id=autocomplete></datalist></div></form><h1><span class=first>S</span>ession <span class=first>S</span>tewart_<span class=first>A</span>pollonius</h1><div></div></header><div id=banner data-id=0><p>This is an unofficial reimagining of the <a href=https://isa-afp.org target=_blank rel="noreferrer noopener">Archive of Formal Proofs</a></p><button style=display:none id=close><svg viewBox="0 0 6.718 6.718" aria-hidden="true" focusable="false"><rect transform="rotate(45)" x="4" y="-4" width="1.5" height="8"/><rect transform="rotate(45)" x=".75" y="-.75" width="8" height="1.5"/></svg></button></div><div><main><div id=Stewart_Apollonius><div class=head><h1>Theory Stewart_Apollonius</h1></div><pre class=source><span class=comment1>(*  Author: Lukas Bulwahn &lt;lukas.bulwahn-at-gmail.com&gt; *)</span>

<span class=keyword1><span class=command>section</span></span> <span class=quoted><span class=plain_text>‹Stewart's Theorem and Apollonius' Theorem›</span></span>

<span class=keyword1><span class=command>theory</span></span> Stewart_Apollonius
<span class=keyword2><span class=keyword>imports</span></span>
  <a href=../Triangle/Triangle.html>Triangle.Triangle</a>
<span class=keyword2><span class=keyword>begin</span></span>

<span class=keyword1><span class=command>subsection</span></span> <span class=quoted><span class=plain_text>‹Stewart's Theorem›</span></span>

<span class=keyword1><span class=command>theorem</span></span> Stewart<span class=main>:</span>
  <span class=keyword2><span class=keyword>fixes</span></span> <span class=free>A</span> <span class=free>B</span> <span class=free>C</span> <span class=free>D</span> <span class=main>::</span> <span class=quoted><span class=quoted>"<span class=tfree>'a</span><span class=main>::</span>euclidean_space"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"between <span class=main>(</span><span class=free>B</span><span class=main>,</span> <span class=free>C</span><span class=main>)</span> <span class=free>D</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>a</span> <span class=main>=</span> dist <span class=free>B</span> <span class=free>C</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span> <span class=main>=</span> dist <span class=free>A</span> <span class=free>C</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>c</span> <span class=main>=</span> dist <span class=free>B</span> <span class=free>A</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>d</span> <span class=main>=</span> dist <span class=free>A</span> <span class=free>D</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>m</span> <span class=main>=</span> dist <span class=free>B</span> <span class=free>D</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>n</span> <span class=main>=</span> dist <span class=free>C</span> <span class=free>D</span>"</span></span>
  <span class=keyword2><span class=keyword>shows</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>m</span> <span class=main>+</span> <span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>n</span> <span class=main>=</span> <span class=free>a</span> <span class=main>*</span> <span class=main>(</span><span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>m</span> <span class=main>*</span> <span class=free>n</span><span class=main>)</span>"</span></span>
<span class=keyword1><span class=command>proof</span></span> <span class=main>(</span><span class=operator>cases</span><span class=main>)</span>
  <span class=keyword3><span class=command>assume</span></span> <span class=quoted><span class=quoted>"<span class=free>B</span> <span class=main>≠</span> <span class=free>D</span> <span class=main>∧</span> <span class=free>C</span> <span class=main>≠</span> <span class=free>D</span>"</span></span>
  <span class=keyword1><span class=command>let</span></span> <span class=var><span class=quoted><span class=var>?θ</span></span></span> <span class=main>=</span> <span class=quoted><span class=quoted>"angle <span class=free>B</span> <span class=free>D</span> <span class=free>A</span>"</span></span>
  <span class=keyword1><span class=command>let</span></span> <span class=var><span class=quoted><span class=var>?θ'</span></span></span> <span class=main>=</span> <span class=quoted><span class=quoted>"angle <span class=free>A</span> <span class=free>D</span> <span class=free>C</span>"</span></span>
  <span class=keyword1><span class=command>from</span></span> <span class=quoted><span class=quoted>‹<span class=free>B</span> <span class=main>≠</span> <span class=free>D</span> <span class=main>∧</span> <span class=free>C</span> <span class=main>≠</span> <span class=free>D</span>›</span></span> <span class=quoted><span class=quoted>‹between <span class=main>_</span> <span class=main>_</span>›</span></span> <span class=keyword1><span class=command>have</span></span> cos<span class=main>:</span> <span class=quoted><span class=quoted>"cos <span class=var>?θ'</span> <span class=main>=</span> <span class=main>-</span> cos <span class=var>?θ</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>auto</span> <span class=quasi_keyword>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> angle_inverse<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>B</span></span> <span class=quoted><span class=free>C</span></span> <span class=quoted><span class=free>D</span></span><span class=main><span class=main>]</span></span> angle_commute<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>A</span></span> <span class=quoted><span class=free>D</span></span> <span class=quoted><span class=free>C</span></span><span class=main><span class=main>]</span></span><span class=main>)</span>
  <span class=keyword1><span class=command>from</span></span> <span class=quoted><span class=quoted>‹between <span class=main>_</span> <span class=main>_</span>›</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>m</span> <span class=main>+</span> <span class=free>n</span> <span class=main>=</span> <span class=free>a</span>"</span></span>
    <span class=keyword1><span class=command>unfolding</span></span> <span class=quoted><span class=quoted>‹<span class=free>a</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>m</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>n</span> <span class=main>=</span> <span class=main>_</span>›</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>metis</span> <span class=main><span class=main>(</span></span>no_types<span class=main><span class=main>)</span></span> between dist_commute<span class=main>)</span>
  <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>=</span> <span class=free>m</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>-</span> <span class=numeral>2</span> <span class=main>*</span> <span class=free>d</span> <span class=main>*</span> <span class=free>m</span> <span class=main>*</span> cos <span class=var>?θ</span>"</span></span>
    <span class=keyword1><span class=command>unfolding</span></span> <span class=quoted><span class=quoted>‹<span class=free>c</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>m</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>d</span> <span class=main>=</span> <span class=main>_</span>›</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> cosine_law_triangle<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>B</span></span> <span class=quoted><span class=free>A</span></span> <span class=quoted><span class=free>D</span></span><span class=main><span class=main>]</span></span> dist_commute<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>D</span></span> <span class=quoted><span class=free>A</span></span><span class=main><span class=main>]</span></span> dist_commute<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>D</span></span> <span class=quoted><span class=free>B</span></span><span class=main><span class=main>]</span></span><span class=main>)</span>
  <span class=keyword1><span class=command>moreover</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>=</span> <span class=free>n</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=numeral>2</span> <span class=main>*</span> <span class=free>d</span> <span class=main>*</span> <span class=free>n</span> <span class=main>*</span> cos <span class=var>?θ</span>"</span></span>
    <span class=keyword1><span class=command>unfolding</span></span> <span class=quoted><span class=quoted>‹<span class=free>b</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>n</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=quoted><span class=quoted>‹<span class=free>d</span> <span class=main>=</span> <span class=main>_</span>›</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> cosine_law_triangle<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>A</span></span> <span class=quoted><span class=free>C</span></span> <span class=quoted><span class=free>D</span></span><span class=main><span class=main>]</span></span> cos dist_commute<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>D</span></span> <span class=quoted><span class=free>A</span></span><span class=main><span class=main>]</span></span> dist_commute<span class=main><span class=main>[</span></span><span class=operator>of</span> <span class=quoted><span class=free>D</span></span> <span class=quoted><span class=free>C</span></span><span class=main><span class=main>]</span></span><span class=main>)</span>
  <span class=keyword1><span class=command>ultimately</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>m</span> <span class=main>+</span> <span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>n</span> <span class=main>=</span> <span class=free>n</span> <span class=main>*</span> <span class=free>m</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>n</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>m</span> <span class=main>+</span> <span class=main>(</span><span class=free>m</span> <span class=main>+</span> <span class=free>n</span><span class=main>)</span> <span class=main>*</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span>"</span></span> <span class=keyword1><span class=command>by</span></span> <span class=operator>algebra</span>
  <span class=keyword1><span class=command>also</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=main>…</span> <span class=main>=</span> <span class=main>(</span><span class=free>m</span> <span class=main>+</span> <span class=free>n</span><span class=main>)</span> <span class=main>*</span> <span class=main>(</span><span class=free>m</span> <span class=main>*</span> <span class=free>n</span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span>"</span></span> <span class=keyword1><span class=command>by</span></span> <span class=operator>algebra</span>
  <span class=keyword1><span class=command>also</span></span> <span class=keyword1><span class=command>from</span></span> <span class=quoted><span class=quoted>‹<span class=free>m</span> <span class=main>+</span> <span class=free>n</span> <span class=main>=</span> <span class=free>a</span>›</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=main>…</span> <span class=main>=</span> <span class=free>a</span> <span class=main>*</span> <span class=main>(</span><span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>m</span> <span class=main>*</span> <span class=free>n</span><span class=main>)</span>"</span></span> <span class=keyword1><span class=command>by</span></span> <span class=operator>simp</span>
  <span class=keyword1><span class=command>finally</span></span> <span class=keyword3><span class=command>show</span></span> <span class=var><span class=quoted><span class=var>?thesis</span></span></span> <span class=keyword1><span class=command>.</span></span>
<span class=keyword1><span class=command>next</span></span>
  <span class=keyword3><span class=command>assume</span></span> <span class=quoted><span class=quoted>"<span class=main>¬</span> <span class=main>(</span><span class=free>B</span> <span class=main>≠</span> <span class=free>D</span> <span class=main>∧</span> <span class=free>C</span> <span class=main>≠</span> <span class=free>D</span><span class=main>)</span>"</span></span>
  <span class=keyword1><span class=command>from</span></span> this assms <span class=keyword3><span class=command>show</span></span> <span class=var><span class=quoted><span class=var>?thesis</span></span></span> <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>auto</span> <span class=quasi_keyword>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> dist_commute<span class=main>)</span>
<span class=keyword1><span class=command>qed</span></span>

<span class=keyword1><span class=command>text</span></span> <span class=quoted><span class=plain_text>‹
Here is an equivalent formulation that is probably more suitable for further use
in other geometry theories in Isabelle.
›</span></span>

<span class=keyword1><span class=command>theorem</span></span> Stewart'<span class=main>:</span>
  <span class=keyword2><span class=keyword>fixes</span></span> <span class=free>A</span> <span class=free>B</span> <span class=free>C</span> <span class=free>D</span> <span class=main>::</span> <span class=quoted><span class=quoted>"<span class=tfree>'a</span><span class=main>::</span>euclidean_space"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"between <span class=main>(</span><span class=free>B</span><span class=main>,</span> <span class=free>C</span><span class=main>)</span> <span class=free>D</span>"</span></span>
  <span class=keyword2><span class=keyword>shows</span></span> <span class=quoted><span class=quoted>"<span class=main>(</span>dist <span class=free>A</span> <span class=free>C</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> dist <span class=free>B</span> <span class=free>D</span> <span class=main>+</span> <span class=main>(</span>dist <span class=free>B</span> <span class=free>A</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> dist <span class=free>C</span> <span class=free>D</span> <span class=main>=</span> dist <span class=free>B</span> <span class=free>C</span> <span class=main>*</span> <span class=main>(</span><span class=main>(</span>dist <span class=free>A</span> <span class=free>D</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> dist <span class=free>B</span> <span class=free>D</span> <span class=main>*</span> dist <span class=free>C</span> <span class=free>D</span><span class=main>)</span>"</span></span>
<span class=keyword1><span class=command>using</span></span> assms <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>auto</span> <span class=quasi_keyword>intro</span><span class=main><span class=main>:</span></span> Stewart<span class=main>)</span>

<span class=keyword1><span class=command>subsection</span></span> <span class=quoted><span class=plain_text>‹Apollonius' Theorem›</span></span>

<span class=keyword1><span class=command>text</span></span> <span class=quoted><span class=plain_text>‹
Apollonius' theorem is a simple specialisation of Stewart's theorem,
but historically predated Stewart's theorem by many centuries.
›</span></span>

<span class=keyword1 id=Stewart_Apollonius-Apollonius><span class=command>lemma</span></span> Apollonius<span class=main>:</span>
  <span class=keyword2><span class=keyword>fixes</span></span> <span class=free>A</span> <span class=free>B</span> <span class=free>C</span> <span class=main>::</span> <span class=quoted><span class=quoted>"<span class=tfree>'a</span><span class=main>::</span>euclidean_space"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>B</span> <span class=main>≠</span> <span class=free>C</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span> <span class=main>=</span> dist <span class=free>A</span> <span class=free>C</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>c</span> <span class=main>=</span> dist <span class=free>B</span> <span class=free>A</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>d</span> <span class=main>=</span> dist <span class=free>A</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span>"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>m</span> <span class=main>=</span> dist <span class=free>B</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span>"</span></span>
  <span class=keyword2><span class=keyword>shows</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>=</span> <span class=numeral>2</span> <span class=main>*</span> <span class=main>(</span><span class=free>m</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span>"</span></span>
<span class=keyword1><span class=command>proof</span></span> <span class=operator>-</span>
  <span class=keyword1><span class=command>from</span></span> <span class=quoted><span class=quoted>‹<span class=free>B</span> <span class=main>≠</span> <span class=free>C</span>›</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>m</span> <span class=main>≠</span> <span class=main>0</span>"</span></span>
    <span class=keyword1><span class=command>unfolding</span></span> <span class=quoted><span class=quoted>‹<span class=free>m</span> <span class=main>=</span> <span class=main>_</span>›</span></span> <span class=keyword1><span class=command>using</span></span> midpoint_eq_endpoint<span class=main>(</span>1<span class=main>)</span> <span class=keyword1><span class=command>by</span></span> <span class=operator>fastforce</span>
  <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"between <span class=main>(</span><span class=free>B</span><span class=main>,</span> <span class=free>C</span><span class=main>)</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> between_midpoint<span class=main>)</span>
  <span class=keyword1><span class=command>moreover</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"dist <span class=free>C</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span> <span class=main>=</span> dist <span class=free>B</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> dist_midpoint<span class=main>)</span>
  <span class=keyword1><span class=command>moreover</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"dist <span class=free>B</span> <span class=free>C</span> <span class=main>=</span> <span class=numeral>2</span> <span class=main>*</span> dist <span class=free>B</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> dist_midpoint<span class=main>)</span>
  <span class=keyword1><span class=command>moreover</span></span> <span class=keyword1><span class=command>note</span></span> assms<span class=main>(</span>2-5<span class=main>)</span>
  <span class=keyword1><span class=command>ultimately</span></span> <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>m</span> <span class=main>+</span> <span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>*</span> <span class=free>m</span> <span class=main>=</span> <span class=main>(</span><span class=numeral>2</span> <span class=main>*</span> <span class=free>m</span><span class=main>)</span> <span class=main>*</span> <span class=main>(</span><span class=free>m</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>auto</span> <span class=quasi_keyword>dest</span><span class=main><span class=main>!</span></span><span class=main><span class=main>:</span></span> Stewart<span class=main><span class=main>[</span></span><span class=keyword2><span class=keyword><span class=operator>where</span></span></span> a<span class=main><span class=main><span class=main>=</span></span></span><span class=quoted><span class=quoted>"<span class=numeral>2</span> <span class=main>*</span> <span class=free>m</span>"</span></span><span class=main><span class=main>]</span></span> <span class=quasi_keyword>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> power2_eq_square<span class=main>)</span>
  <span class=keyword1><span class=command>from</span></span> this <span class=keyword1><span class=command>have</span></span> <span class=quoted><span class=quoted>"<span class=free>m</span> <span class=main>*</span> <span class=main>(</span><span class=free>b</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>c</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span> <span class=main>=</span> <span class=free>m</span> <span class=main>*</span> <span class=main>(</span><span class=numeral>2</span> <span class=main>*</span> <span class=main>(</span><span class=free>m</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=free>d</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span><span class=main>)</span>"</span></span>
    <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>simp</span> <span class=quasi_keyword>add</span><span class=main><span class=main>:</span></span> distrib_left semiring_normalization_rules<span class=main><span class=main>(</span></span>7<span class=main><span class=main>)</span></span><span class=main>)</span>
  <span class=keyword1><span class=command>from</span></span> this <span class=quoted><span class=quoted>‹<span class=free>m</span> <span class=main>≠</span> <span class=main>0</span>›</span></span> <span class=keyword3><span class=command>show</span></span> <span class=var><span class=quoted><span class=var>?thesis</span></span></span> <span class=keyword1><span class=command>by</span></span> <span class=operator>auto</span>
<span class=keyword1><span class=command>qed</span></span>

<span class=keyword1><span class=command>text</span></span> <span class=quoted><span class=plain_text>‹
Here is the equivalent formulation that is probably more suitable for further use
in other geometry theories in Isabelle.
›</span></span>

<span class=keyword1 id="Stewart_Apollonius-Apollonius'"><span class=command>lemma</span></span> Apollonius'<span class=main>:</span>
  <span class=keyword2><span class=keyword>fixes</span></span> <span class=free>A</span> <span class=free>B</span> <span class=free>C</span> <span class=main>::</span> <span class=quoted><span class=quoted>"<span class=tfree>'a</span><span class=main>::</span>euclidean_space"</span></span>
  <span class=keyword2><span class=keyword>assumes</span></span> <span class=quoted><span class=quoted>"<span class=free>B</span> <span class=main>≠</span> <span class=free>C</span>"</span></span>
  <span class=keyword2><span class=keyword>shows</span></span> <span class=quoted><span class=quoted>"<span class=main>(</span>dist <span class=free>A</span> <span class=free>C</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=main>(</span>dist <span class=free>B</span> <span class=free>A</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>=</span> <span class=numeral>2</span> <span class=main>*</span> <span class=main>(</span><span class=main>(</span>dist <span class=free>B</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span> <span class=main>+</span> <span class=main>(</span>dist <span class=free>A</span> <span class=main>(</span>midpoint <span class=free>B</span> <span class=free>C</span><span class=main>)</span><span class=main>)</span><span class=main><span class=hidden>⇧</span><sup>2</sup></span><span class=main>)</span>"</span></span>
<span class=keyword1><span class=command>using</span></span> assms <span class=keyword1><span class=command>by</span></span> <span class=main>(</span><span class=operator>rule</span> Apollonius<span class=main>)</span> <span class=operator>auto</span>

<span class=keyword2><span class=keyword>end</span></span>
</pre></div></main></div></div></body></html>